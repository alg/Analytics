%p#notice= notice

.row
  .span6
    %h2= "All Voter Transaction Records ("+@voter_transaction_records.length.to_s+")"
  .span3
    = link_to 'Show Table', :show_xml => nil
    \|
    = link_to 'Show XML', :show_xml => true
  .span2
    -if (@voter_transaction_records.length > 0)
      %b= link_to "Download XML", format: 'xml', class: 'btn'
%br
-if @showxml
  %table
    %pre= render partial: 'vtrs', formats: [ :xml ]
-else
  %table{:style=>"text-align:center"}
    %tr
      %th Voter
      %th &nbsp;
      %th VType
      %th &nbsp;
      %th Date
      %th &nbsp;
      %th Action
      %th &nbsp;
      %th Form
      %th &nbsp;
      %th LEO
      %th &nbsp;
      %th Note
      %th &nbsp;
      %th Election
      %th
    - @voter_transaction_records.each do |vtr|
      -if ! vtr.archived
        %tr
          %td= vtr.vname
          %td
          %td= (vtr.vtype == 'UOCAVA' ? 'UOC' : vtr.vtype)
          %td
          %td= vtr.datime
          %td
          %td= vtr.action
          %td
          %td= vtr.form
          %td
          %td= vtr.leo
          %td
          %td= vtr.note
          %td
          %td= Election.find(VoterTransactionLog.find(vtr.voter_transaction_log_id).election_id).name
          %td
          %td= link_to 'Show', vtr
%br
= link_to 'Back', :root
\|
= link_to 'New Voter Transaction Record', new_voter_transaction_record_path
